<!doctype html><html lang="id"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Masuk — Wed-System</title>
<script src="https://cdn.tailwindcss.com"></script>
</head><body class="min-h-screen bg-slate-950 text-slate-100 grid place-items-center p-6">
<div class="w-full max-w-md space-y-4">
  <h1 class="text-2xl font-bold">Masuk</h1>
  <form id="fLogin" class="space-y-3">
    <input id="email" type="email" placeholder="email" class="w-full px-3 py-2 rounded bg-slate-900 border border-slate-800"/>
    <input id="pass" type="password" placeholder="password" class="w-full px-3 py-2 rounded bg-slate-900 border border-slate-800"/>
    <button class="w-full px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-500">Masuk</button>
  </form>
  <div class="text-sm flex justify-between">
    <a href="/reset" class="text-sky-400 hover:underline">Lupa password?</a>
    <a href="/register" class="text-sky-400 hover:underline">Daftar</a>
  </div>
  <div id="msg" class="text-sm text-slate-400"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, onAuthStateChanged, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyCVNDoM04DtzRda1xMLj6q6FcBLkHbaicE",
  authDomain: "wedsystem25.firebaseapp.com",
  projectId: "wedsystem25",
  storageBucket: "wedsystem25.firebasestorage.app",
  messagingSenderId: "144669260555",
  appId: "1:144669260555:web:6de0fff3c43d46a606400e"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

const msg = (t,c="text-slate-400")=>{ const el=document.getElementById("msg"); el.className="text-sm "+c; el.textContent=t; };

onAuthStateChanged(auth, u => {
  if(u){ const next=new URLSearchParams(location.search).get("next")||"/dashboardvendor"; location.replace(next); }
});

document.getElementById("fLogin").addEventListener("submit", async (e)=>{
  e.preventDefault();
  const email = document.getElementById("email").value.trim();
  const pass  = document.getElementById("pass").value;
  try{
    await signInWithEmailAndPassword(auth,email,pass);
    msg("Berhasil login, mengalihkan…","text-emerald-400");
  }catch(err){ msg("Gagal login: "+err.message,"text-rose-400"); }
});
</script>
</body></html>
