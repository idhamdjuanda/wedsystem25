<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Dashboard Vendor — Wed-System</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-950 text-slate-100">
  <header class="max-w-5xl mx-auto px-4 py-6 flex items-center justify-between">
    <h1 class="text-xl font-bold">Dashboard Vendor</h1>
    <div class="flex items-center gap-3">
      <span id="email" class="text-sm opacity-80">-</span>
      <span id="planBadge" class="px-2 py-1 rounded bg-slate-700 text-xs">-</span>
      <button id="logout" class="px-3 py-2 rounded-xl bg-slate-800 border border-white/10">Keluar</button>
    </div>
  </header>

  <main class="max-w-5xl mx-auto px-4 space-y-6">
    <p id="countdown" class="text-sm opacity-80">—</p>

    <!-- NAV TAB -->
    <nav id="tabs" class="flex flex-wrap gap-2">
      <button class="tab px-3 py-2 rounded-xl bg-emerald-500 text-slate-900 font-semibold" data-tab="profil">Profil</button>
      <button class="tab px-3 py-2 rounded-xl bg-slate-800 border border-white/10" data-tab="pricelist">Pricelist</button>
      <button class="tab px-3 py-2 rounded-xl bg-slate-800 border border-white/10" data-tab="addons">Add-on</button>
      <button class="tab px-3 py-2 rounded-xl bg-slate-800 border border-white/10" data-tab="discounts">Kode Diskon</button>
      <button class="tab px-3 py-2 rounded-xl bg-slate-800 border border-white/10" data-tab="bundling">Bundling</button>
    </nav>

    <!-- PROFIL -->
    <section class="panel rounded-2xl border border-white/10 p-5 bg-slate-900/40" data-panel="profil">
      <h2 class="font-semibold mb-4">Profil Vendor</h2>
      <form id="formProfil" class="grid md:grid-cols-2 gap-4">
        <input id="brandName"   placeholder="Nama Brand" class="px-4 py-3 rounded-xl bg-slate-950/70 border border-white/10"/>
        <input id="address"     placeholder="Alamat Vendor" class="px-4 py-3 rounded-xl bg-slate-950/70 border border-white/10"/>
        <input id="whatsapp"    placeholder="No. WA Vendor" class="px-4 py-3 rounded-xl bg-slate-950/70 border border-white/10"/>
        <input id="bankName"    placeholder="Nama Bank" class="px-4 py-3 rounded-xl bg-slate-950/70 border border-white/10"/>
        <input id="bankNumber"  placeholder="No. Rekening" class="px-4 py-3 rounded-xl bg-slate-950/70 border border-white/10"/>
        <input id="bankHolder"  placeholder="Atas Nama" class="px-4 py-3 rounded-xl bg-slate-950/70 border border-white/10"/>
        <div class="md:col-span-2 flex items-center gap-3">
          <button class="px-4 py-2 rounded-xl bg-emerald-500 text-slate-900 font-semibold">Simpan Profil</button>
          <span id="profilMsg" class="text-sm opacity-80"></span>
        </div>
      </form>
    </section>

    <!-- PRICELIST -->
    <section class="panel rounded-2xl border border-white/10 p-5 bg-slate-900/40 hidden" data-panel="pricelist">
      <h2 class="font-semibold mb-4">Pricelist</h2>
      <form id="formPrice" class="grid md:grid-cols-4 gap-3">
        <select id="priceType" class="px-4 py-3 rounded-xl bg-slate-950/70 border border-white/10">
          <option value="Wedding">Wedding</option>
          <option value="PreWedding">PreWedding</option>
          <option value="Lamaran">Lamaran</option>
        </select>
        <input id="priceName"   placeholder="Nama Paket" class="px-4 py-3 rounded-xl bg-slate-950/70 border border-white/10"/>
        <input id="priceDetail" placeholder="Detail Paket" class="px-4 py-3 rounded-xl bg-slate-950/70 border border-white/10"/>
        <input id="priceAmount" type="number" min="0" placeholder="Harga (Rp)" class="px-4 py-3 rounded-xl bg-slate-950/70 border border-white/10"/>
        <div class="md:col-span-4">
          <button class="px-4 py-2 rounded-xl bg-sky-400 text-slate-900 font-semibold">Tambah</button>
        </div>
      </form>
      <ul id="priceList" class="mt-4 space-y-2"></ul>
    </section>

    <!-- ADD-ON -->
    <section class="panel rounded-2xl border border-white/10 p-5 bg-slate-900/40 hidden" data-panel="addons">
      <h2 class="font-semibold mb-4">Add-on</h2>
      <form id="formAddon" class="grid md:grid-cols-3 gap-3">
        <input id="addonName"   placeholder="Nama Add-on" class="px-4 py-3 rounded-xl bg-slate-950/70 border border-white/10"/>
        <input id="addonPrice"  type="number" min="0" placeholder="Harga (Rp)" class="px-4 py-3 rounded-xl bg-slate-950/70 border border-white/10"/>
        <div><button class="px-4 py-2 rounded-xl bg-sky-400 text-slate-900 font-semibold">Tambah</button></div>
      </form>
      <ul id="addonList" class="mt-4 space-y-2"></ul>
    </section>

    <!-- DISKON -->
    <section class="panel rounded-2xl border border-white/10 p-5 bg-slate-900/40 hidden" data-panel="discounts">
      <h2 class="font-semibold mb-4">Kode Diskon</h2>
      <form id="formDisc" class="grid md:grid-cols-4 gap-3">
        <input id="discCode" placeholder="Kode" class="px-4 py-3 rounded-xl bg-slate-950/70 border border-white/10"/>
        <select id="discType" class="px-4 py-3 rounded-xl bg-slate-950/70 border border-white/10">
          <option value="percent">% (persen)</option>
          <option value="rupiah">Rp (nominal)</option>
        </select>
        <input id="discValue" type="number" min="0" placeholder="Nilai" class="px-4 py-3 rounded-xl bg-slate-950/70 border border-white/10"/>
        <div><button class="px-4 py-2 rounded-xl bg-sky-400 text-slate-900 font-semibold">Tambah</button></div>
      </form>
      <ul id="discList" class="mt-4 space-y-2"></ul>
    </section>

    <!-- BUNDLING -->
    <section class="panel rounded-2xl border border-white/10 p-5 bg-slate-900/40 hidden" data-panel="bundling">
      <h2 class="font-semibold mb-4">Bundling</h2>
      <form id="formBundle" class="space-y-3">
        <div class="grid md:grid-cols-3 gap-3">
          <input id="bundleName" placeholder="Nama Bundling" class="px-4 py-3 rounded-xl bg-slate-950/70 border border-white/10"/>
          <input id="bundlePct" type="number" min="0" max="100" placeholder="Diskon (%)" class="px-4 py-3 rounded-xl bg-slate-950/70 border border-white/10"/>
          <div class="text-sm opacity-80 flex items-center">Centang item dari Pricelist</div>
        </div>
        <div id="bundleItemsBox" class="grid md:grid-cols-2 gap-2"></div>
        <button class="px-4 py-2 rounded-xl bg-sky-400 text-slate-900 font-semibold">Simpan Bundling</button>
      </form>
      <ul id="bundleList" class="mt-4 space-y-2"></ul>
    </section>

    <div class="flex items-center justify-between">
      <a href="/login" class="underline">Kembali ke Login</a>
      <button id="btnPay" class="px-4 py-3 rounded-xl bg-emerald-500 text-slate-900 font-semibold">Bayar / Perpanjang 1 bulan (Rp 50.000)</button>
    </div>
  </main>

  <script type="module" src="/vendor.js"></script>
</body>
</html>
<!-- Debug / bantuan jika webhook Midtrans telat -->
<div class="mt-4">
  <button id="btnRefreshStatus" class="px-4 py-2 rounded-lg bg-amber-500 text-white hover:bg-amber-600 transition">
    Refresh Status Pembayaran (Midtrans)
  </button>
</div>
<div class="mt-2 text-xs text-gray-400">Source: <span id="docPath">—</span></div>
<div class="mt-2 text-xs text-gray-400">Doc Source: <span id="docPath">—</span></div>
<!-- ===== Status Langganan ===== -->
<div class="mt-4 p-4 rounded-lg bg-gray-800/40">
  <div class="text-sm text-gray-400">Doc Source: <span id="docPath">—</span></div>
  <div class="mt-2 text-lg">Status: <span id="subStatus" class="font-semibold">—</span></div>
  <div class="text-sm text-gray-300">Countdown: <span id="subCountdown">—</span></div>
  <pre id="debugVals" class="mt-2 text-xs text-gray-400 whitespace-pre-wrap"></pre>
</div>
